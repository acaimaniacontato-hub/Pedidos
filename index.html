<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A√ßa√≠ Mania - Premium Delivery</title>
    <style>
        :root { 
            --bg-dark: #1a0521; 
            --card-bg: #2d0b37;
            --roxo-vibrante: #9d34da;
            --texto: #f4e9f7;
            --verde-whats: #25d366; 
            --dourado: #ffcf4b; 
            --fundo-input: #ffffff;
            --alerta: #ff4444;
        }
        
        body { font-family: 'Segoe UI', Roboto, sans-serif; background-color: var(--bg-dark); color: var(--texto); margin: 0; padding-bottom: 80px; }

        header { 
            background: linear-gradient(180deg, #3e0e4d 0%, var(--bg-dark) 100%); 
            padding: 30px 20px; 
            display: flex;
            flex-direction: column;
            align-items: center; 
            justify-content: center;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1); 
        }

        .logo-img { width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--roxo-vibrante); margin-bottom: 15px; object-fit: cover; box-shadow: 0 0 15px rgba(157, 52, 218, 0.4); }
        header h1 { color: var(--dourado); margin: 0; font-size: 2.4rem; letter-spacing: -1px; line-height: 1.1; }
        header p { color: #fff; margin: 8px 0 0 0; font-size: 1.1rem; opacity: 0.9; font-weight: 300; }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .card-secao { background: var(--card-bg); padding: 20px; border-radius: 18px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        h2 { color: var(--dourado); font-size: 1.2rem; margin-top: 0; }
        
        input, select, textarea { width: 100%; padding: 15px; margin-top: 8px; border: 2px solid var(--roxo-vibrante); border-radius: 12px; font-size: 16px; box-sizing: border-box; background: var(--fundo-input); color: #000; font-weight: 600; }
        textarea { height: 80px; resize: none; font-family: inherit; }
        
        .desc-produto { background: #fff3cd; border-left: 5px solid #ffc107; padding: 12px; margin: 15px 0; font-size: 0.9rem; color: #856404; font-weight: bold; border-radius: 8px; display: none; }
        
        .bloco-acai { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; border: 1px solid var(--roxo-vibrante); margin-bottom: 15px; }
        .titulo-acai { color: var(--dourado); font-weight: bold; margin-bottom: 10px; display: block; border-bottom: 1px solid #444; padding-bottom: 5px; }
        
        .grid-complementos { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .secao-frutas { grid-column: 1 / -1; color: var(--dourado); font-size: 0.8rem; text-transform: uppercase; margin-bottom: 5px; margin-top: 10px; }
        .item-check { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: white; cursor: pointer; }
        .item-check input { width: 20px; height: 20px; }
        
        .btn-principal { background: var(--roxo-vibrante); color: white; border: none; padding: 18px; border-radius: 12px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 15px; }
        .btn-concluir { background: var(--verde-whats); color: white; border: none; padding: 20px; border-radius: 12px; width: 100%; font-size: 20px; font-weight: bold; cursor: pointer; margin-top: 15px; }

        .resumo { background: white; border: 4px solid var(--roxo-vibrante); padding: 20px; border-radius: 15px; margin-top: 25px; color: black; display: none; }
        .item-carrinho { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; padding: 12px 0; }
        .btn-remover { background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }

        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
        .modal-content { background: var(--card-bg); margin: 20% auto; padding: 25px; border: 2px solid var(--roxo-vibrante); width: 85%; max-width: 400px; border-radius: 20px; text-align: center; }
        .modal-btns { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .btn-modal-add { background: transparent; color: var(--dourado); border: 2px solid var(--dourado); padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .btn-modal-final { background: var(--verde-whats); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body onload="verificarHorario()">

<div id="modalDecisao" class="modal">
    <div class="modal-content">
        <h2 style="color: white;">‚úÖ Item Adicionado!</h2>
        <p style="color: var(--texto);">O que deseja fazer agora?</p>
        <div class="modal-btns">
            <button class="btn-modal-add" onclick="fecharModal()">+ CONTINUAR COMPRANDO</button>
            <button class="btn-modal-final" onclick="irParaResumo()">üõí FINALIZAR PEDIDO</button>
        </div>
    </div>
</div>

<header>
    <img src="acai.jpeg" alt="Logo" class="logo-img">
    <h1>A√ßa√≠ Mania</h1>
    <p>Premium Delivery</p>
</header>

<div class="container">
    <div id="statusLoja" style="text-align:center; padding:10px; border-radius:10px; margin-bottom:15px; font-weight:bold; color: white;">Verificando...</div>

    <div class="card-secao">
        <h2>üìç Entrega</h2>
        <input type="text" id="nome" placeholder="Seu Nome">
        <input type="tel" id="whatsapp_cliente" placeholder="WhatsApp (61) 9...." onkeyup="handlePhone(event)">
        <select id="cidade" onchange="atualizarResumo()">
            <option value="Itapo√° Parque">Itapo√° Parque (Gr√°tis)</option>
            <option value="Itapo√° I">Itapo√° I</option>
            <option value="Itapo√° II">Itapo√° II</option>
            <option value="Itapo√° - Del Lago">Itapo√° - Del Lago (R$ 7,00)</option>
            <option value="Parano√°">Parano√° (R$ 7,00)</option>
            <option value="Parano√° Parque">Parano√° Parque (R$ 7,00)</option>
            <option value="Cond. Entre Lagos">Cond. Entre Lagos (R$ 8,00)</option>
            <option value="Cond. Novo Horizonte">Cond. Novo Horizonte (R$ 8,00)</option>
            <option value="Cond. La Font">Cond. La Font (R$ 8,00)</option>
        </select>
        <input type="text" id="endereco" placeholder="Endere√ßo Completo">
        <textarea id="observacao" placeholder="Obs: Interfone, portaria, tirar algo..."></textarea>
    </div>

    <div class="card-secao">
        <h2>ü•§ Produto</h2>
        <select id="produto" onchange="atualizarOpcoes()">
            <option value="">Escolha um produto...</option>
            <optgroup label="A√ßa√≠s e Cupua√ßu">
                <option value="A√ßa√≠ Tradicional" data-desc="üíú A√ßa√≠ cremoso batido na hora!" data-qtd="1">A√ßa√≠ Tradicional (Sem Nutella)</option>
                <option value="A√ßa√≠ com Nutella" data-desc="üç´ A√ßa√≠ premium com Nutella aut√™ntica." data-qtd="1">A√ßa√≠ com Nutella</option>
                <option value="Cupua√ßu" data-desc="‚ö™ Polpa de cupua√ßu pura e cremosa." data-qtd="1">Cupua√ßu Puro</option>
            </optgroup>
            <optgroup label="Combos">
                <option value="Combo Casal" data-fixo="36.00" data-desc="üëâ 2 A√ßa√≠s de 400 ml com Nutella." data-qtd="2">Combo Casal ‚Äî R$ 36,00</option>
                <option value="Combo Fam√≠lia" data-fixo="54.00" data-desc="üë®‚Äçüë©‚Äçüëß‚Äçüë¶ 3 A√ßa√≠s de 400 ml com Nutella." data-qtd="3">Combo Fam√≠lia ‚Äî R$ 54,00</option>
            </optgroup>
        </select>

        <div id="descProduto" class="desc-produto"></div>

        <div id="boxEscolhas" style="display:none;">
            <div id="boxTamanho">
                <label style="color:var(--dourado); font-weight:bold; display:block; margin-top:10px;">Tamanho:</label>
                <select id="tamanho" onchange="atualizarResumo()"></select>
            </div>
            
            <div id="containerAcais"></div>
            
            <div id="secaoExtrasPagos" style="margin-top: 15px;">
                <div class="bloco-acai" style="border: 2px solid var(--dourado); background: rgba(255, 207, 75, 0.1);">
                    <span class="titulo-acai" style="color: var(--dourado);">‚ûï Adicionais Extras (Opcional):</span>
                    <div class="grid-complementos">
                        <label class="item-check"><input type="checkbox" class="extra-item" data-price="4.00" value="Nutella Extra"> Nutella (+R$4)</label>
                        <label class="item-check"><input type="checkbox" class="extra-item" data-price="3.00" value="Leite Ninho"> Ninho (+R$3)</label>
                        <label class="item-check"><input type="checkbox" class="extra-item" data-price="2.50" value="Ouro Branco"> Ouro Branco (+R$2,5)</label>
                        <label class="item-check"><input type="checkbox" class="extra-item" data-price="3.00" value="Morango Extra"> + Morango (+R$3)</label>
                    </div>
                </div>
            </div>
        </div>

        <button id="btnAdicionar" class="btn-principal" onclick="adicionarItem()">+ ADICIONAR AO PEDIDO</button>
    </div>

    <div class="card-secao">
        <h2>üí≥ Pagamento</h2>
        <select id="pagamento" onchange="verificarMetodoPagamento()">
            <option value="Pix">Pix</option>
            <option value="Cart√£o">Cart√£o</option>
            <option value="Dinheiro">Dinheiro</option>
        </select>
        <div id="campoTroco" style="display:none;"><input type="number" id="valorTroco" placeholder="Troco para quanto?"></div>
    </div>

    <div id="resumo" class="resumo">
        <h3>üõí Seu Pedido</h3>
        <div id="listaItens"></div>
        <div style="text-align:right; margin-top:10px;">
            <span id="txtFrete">Frete: R$ 0,00</span>
        </div>
        <div id="total" style="font-size:1.5rem; font-weight:800; text-align:center; margin:10px 0;"></div>
        <button class="btn-concluir" onclick="finalizarPedido()">CONCLUIR NO WHATSAPP</button>
    </div>
</div>

<script>
    let carrinho = [];
    let valorTotalFinal = 0;

    function handlePhone(event) {
        let v = event.target.value.replace(/\D/g, "");
        v = v.replace(/(\d{2})(\d)/, "($1) $2");
        v = v.replace(/(\d{5})(\d)/, "$1-$2");
        event.target.value = v;
    }

    function verificarHorario() {
        const h = new Date().getHours();
        const s = document.getElementById("statusLoja");
        if(h >= 10 && h < 22) {
            s.innerHTML = "üü¢ ABERTO AGORA"; s.style.background = "#25d366";
        } else {
            s.innerHTML = "üî¥ FECHADO NO MOMENTO"; s.style.background = "#ff4444";
        }
    }

    function atualizarOpcoes() {
        const p = document.getElementById("produto");
        const box = document.getElementById("boxEscolhas");
        const container = document.getElementById("containerAcais");
        const desc = document.getElementById("descProduto");

        if(!p.value) { box.style.display = "none"; desc.style.display = "none"; return; }

        desc.innerHTML = p.options[p.selectedIndex].getAttribute("data-desc");
        desc.style.display = "block";
        box.style.display = "block";

        const qtd = parseInt(p.options[p.selectedIndex].getAttribute("data-qtd"));
        container.innerHTML = "";
        for(let i=1; i<=qtd; i++) {
            container.innerHTML += `
            <div class="bloco-acai">
                <span class="titulo-acai">Pote 0${i}:</span>
                <div class="grid-complementos">
                    <div class="secao-frutas">Fruta:</div>
                    <label class="item-check"><input type="checkbox" class="fruta-${i}" value="Banana" onclick="soUmaFruta(this, ${i})"> Banana</label>
                    <label class="item-check"><input type="checkbox" class="fruta-${i}" value="Morango" onclick="soUmaFruta(this, ${i})"> Morango</label>
                    <div class="secao-frutas">Outros:</div>
                    <label class="item-check"><input type="checkbox" class="comp-${i}" value="Leite em P√≥"> Leite em P√≥</label>
                    <label class="item-check"><input type="checkbox" class="comp-${i}" value="Granola"> Granola</label>
                    <label class="item-check"><input type="checkbox" class="comp-${i}" value="Pa√ßoca"> Pa√ßoca</label>
                    <label class="item-check"><input type="checkbox" class="comp-${i}" value="Leite Condensado"> Leite Condensado</label>
                </div>
            </div>`;
        }

        const tBox = document.getElementById("boxTamanho");
        const tSel = document.getElementById("tamanho");
        if(p.value.includes("Combo")) {
            tBox.style.display = "none";
        } else {
            tBox.style.display = "block";
            tSel.innerHTML = p.value === "A√ßa√≠ Tradicional" ? 
                '<option value="12">300ml - R$ 12</option><option value="16">400ml - R$ 16</option><option value="20">500ml - R$ 20</option>' :
                '<option value="15">300ml - R$ 15</option><option value="19">400ml - R$ 19</option><option value="23">500ml - R$ 23</option>';
        }
    }

    function soUmaFruta(ck, g) {
        document.querySelectorAll(`.fruta-${g}`).forEach(c => { if(c !== ck) c.checked = false; });
    }

    function adicionarItem() {
        const p = document.getElementById("produto");
        let vBase = p.value.includes("Combo") ? parseFloat(p.options[p.selectedIndex].getAttribute("data-fixo")) : parseFloat(document.getElementById("tamanho").value);
        
        let vExtras = 0;
        let exNomes = [];
        document.querySelectorAll('.extra-item:checked').forEach(ex => {
            vExtras += parseFloat(ex.getAttribute('data-price'));
            exNomes.push(ex.value);
        });

        const qtd = parseInt(p.options[p.selectedIndex].getAttribute("data-qtd"));
        let comps = [];
        for(let i=1; i<=qtd; i++) {
            let pEscolhas = [];
            document.querySelectorAll(`.fruta-${i}:checked, .comp-${i}:checked`).forEach(c => pEscolhas.push(c.value));
            comps.push(`Pote 0${i}: [${pEscolhas.join(", ") || "S√≥ A√ßa√≠"}]`);
        }

        if(exNomes.length > 0) comps.push(`ADICIONAIS PAGOS: ${exNomes.join(", ")}`);

        carrinho.push({
            nome: p.options[p.selectedIndex].text.split('‚Äî')[0].trim(),
            tam: p.value.includes("Combo") ? "" : document.getElementById("tamanho").options[document.getElementById("tamanho").selectedIndex].text.split('-')[0].trim(),
            valor: vBase + vExtras,
            detalhe: comps.join("\n")
        });

        document.querySelectorAll('.extra-item').forEach(x => x.checked = false);
        document.getElementById("modalDecisao").style.display = "block";
        atualizarResumo();
    }

    function atualizarResumo() {
        const r = document.getElementById("resumo");
        if(carrinho.length === 0) { r.style.display = "none"; return; }
        r.style.display = "block";
        let h = ""; let sub = 0;
        carrinho.forEach((item, idx) => {
            sub += item.valor;
            h += `<div class="item-carrinho"><span><b>${item.nome} ${item.tam}</b><br><small>${item.detalhe.replace(/\n/g, '<br>')}</small></span><button class="btn-remover" onclick="carrinho.splice(${idx},1); atualizarResumo();">X</button></div>`;
        });
        const cid = document.getElementById("cidade").value;
        let f = (cid.includes("Lago") || cid.includes("Parano√°")) ? 7 : (cid.includes("Cond.") ? 8 : 0);
        valorTotalFinal = sub + f;
        document.getElementById("listaItens").innerHTML = h;
        document.getElementById("txtFrete").innerHTML = `Frete: R$ ${f.toFixed(2)}`;
        document.getElementById("total").innerHTML = `TOTAL: R$ ${valorTotalFinal.toFixed(2)}`;
    }

    function fecharModal() { document.getElementById("modalDecisao").style.display = "none"; document.getElementById("produto").value = ""; atualizarOpcoes(); }
    function irParaResumo() { document.getElementById("modalDecisao").style.display = "none"; document.getElementById("resumo").scrollIntoView({behavior: 'smooth'}); }
    function verificarMetodoPagamento() { document.getElementById("campoTroco").style.display = (document.getElementById("pagamento").value === "Dinheiro") ? "block" : "none"; }

    function finalizarPedido() {
        const n = document.getElementById("nome").value;
        const e = document.getElementById("endereco").value;
        const o = document.getElementById("observacao").value;
        if(!n || !e) return alert("Nome e Endere√ßo s√£o obrigat√≥rios!");

        let m = `*NOVO PEDIDO* üíú\n\n*Cliente:* ${n}\n*Endere√ßo:* ${e}\n`;
        if(o) m += `*Obs:* ${o}\n`;
        m += `\n*ITENS:*`;
        carrinho.forEach(i => { m += `\n- ${i.nome} ${i.tam}\n${i.detalhe}\n`; });
        m += `\n*TOTAL: R$ ${valorTotalFinal.toFixed(2)}*\n*Pagamento:* ${document.getElementById("pagamento").value}`;
        
        window.location.href = `https://wa.me/5561995214424?text=${encodeURIComponent(m)}`;
    }
</script>
</body>
</html>
