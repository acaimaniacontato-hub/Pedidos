<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A√ßa√≠ Mania - Card√°pio Digital</title>
    <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#8a19d6">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --roxo-principal: #8a19d6;
            --roxo-escuro: #4a0e7a;
            --amarelo: #ffcf4b;
            --cinza-fundo: #f8f9fa;
            --branco: #ffffff;
            --cor-aberto: #25d366;
            --cor-fechado: #ff4b4b;
        }

        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--cinza-fundo); margin: 0; padding-bottom: 0; }

        header {
            background-color: var(--roxo-escuro);
            padding: 15px 5%;
            display: flex;
            flex-direction: column; 
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1100;
            border-bottom: 3px solid var(--amarelo);
            gap: 15px;
        }
        @media (min-width: 768px) { header { flex-direction: row; justify-content: space-between; } }

        .logo-box { display: flex; align-items: center; gap: 12px; }
        .logo-circle { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--amarelo); background: white; object-fit: cover; }
        .loja-nome { color: var(--branco); font-weight: 800; font-size: 1.2rem; text-transform: uppercase; }

        .status-loja { display: flex; align-items: center; gap: 6px; background: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; color: white; font-weight: 600; }
        .status-bola { width: 10px; height: 10px; border-radius: 50%; }
        .loja-aberta .status-bola { background-color: var(--cor-aberto); box-shadow: 0 0 8px var(--cor-aberto); }
        .loja-fechada .status-bola { background-color: var(--cor-fechado); box-shadow: 0 0 8px var(--cor-fechado); }

        .header-nav { display: flex; gap: 10px; justify-content: center; flex-grow: 1; }
        .header-link { text-decoration: none; color: var(--branco); font-weight: 600; font-size: 0.85rem; padding: 8px 15px; border-radius: 50px; transition: 0.3s; display: flex; align-items: center; gap: 5px; }
        .header-link:hover { background: rgba(255, 255, 255, 0.1); color: var(--amarelo); }

        .cart-header { position: relative; cursor: pointer; color: var(--amarelo); font-size: 1.5rem; }

        .hero-banner {
            position: relative; width: 100%; height: 300px;
            background: url('mania.jpeg') center/cover;
            display: flex; align-items: center; justify-content: center; text-align: center; color: white;
        }
        .hero-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(74, 14, 122, 0.75); z-index: 1;
        }
        .hero-content { position: relative; z-index: 2; padding: 20px; max-width: 700px; }
        .hero-content h2 { font-size: 1.8rem; font-weight: 800; margin-bottom: 5px; }
        .hero-content p { font-size: 0.95rem; opacity: 0.9; margin-bottom: 20px; }
        .btn-hero {
            background: var(--amarelo); color: var(--roxo-escuro); text-decoration: none;
            padding: 12px 30px; border-radius: 50px; font-weight: 700; font-size: 0.9rem;
            display: inline-flex; align-items: center; gap: 10px; transition: 0.3s;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .secao-titulo { text-align: center; color: var(--roxo-escuro); font-weight: 700; font-size: 2.2rem; margin: 40px 0 0; scroll-margin-top: 140px; }
        .secao-subtitulo { text-align: center; color: #666; font-size: 1rem; margin: 0 0 30px; font-weight: 400; }

        .grid-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }

        .card, .card-combo { transition: transform 0.3s ease; background: var(--branco); border-radius: 20px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.05); cursor: pointer; height: 100%; display: flex; flex-direction: column; }
        .card:hover, .card-combo:hover { transform: scale(1.05); box-shadow: 0 15px 35px rgba(138, 25, 214, 0.25); z-index: 10; }

        .img-box { position: relative; height: 180px; width: 100%; overflow: hidden; }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .badge-perso { position: absolute; top: 10px; right: 10px; background: var(--amarelo); color: #000; padding: 4px 12px; border-radius: 50px; font-size: 0.7rem; font-weight: 700; }
        .card-body { padding: 15px; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .btn-monte { background: var(--roxo-principal); color: white; border: none; padding: 12px; border-radius: 50px; width: 90%; font-weight: 700; cursor: pointer; transition: 0.3s; margin: 10px auto; display: block; z-index: 2; position: relative; }

        .btn-limpar { background: none; color: var(--cor-fechado); border: 1px solid var(--cor-fechado); padding: 5px 15px; border-radius: 50px; font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: 0.3s; margin-bottom: 10px; display: inline-flex; align-items: center; gap: 5px; }
        .btn-limpar:hover { background: var(--cor-fechado); color: white; }

        .card-combo { padding: 25px; border: 2px solid transparent; position: relative; background: #fff; z-index: 1; }
        
        .card-combo::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            z-index: -1;
            border-radius: 20px;
        }

        .combo-casal::before { background-image: url('combo-casal.jpeg'); }
        .combo-mania::before { background-image: url('500 com nutella.jpeg'); }
        .combo-familia::before { background-image: url('acai-familia.jpg'); }
        .combo-economico::before { background-image: url('acai-simples.jpg'); }

        .card-combo.destaque { border: 2px solid var(--amarelo); }
        .combo-info { display: flex; gap: 15px; align-items: center; margin-bottom: 15px; text-align: left; position: relative; z-index: 2; }
        .combo-icon { width: 45px; height: 45px; background: var(--amarelo); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--roxo-escuro); font-size: 1.2rem; flex-shrink: 0; }
        .preco-combo { font-size: 1.4rem; font-weight: 800; color: var(--roxo-escuro); position: relative; z-index: 2; }

        .op-item.selecionado { border: 2px solid var(--roxo-principal); background: #f3e5f5; font-weight: bold; }
        .op-item.multi-select.selecionado { background: var(--amarelo); border-color: var(--roxo-escuro); }

        .avaliacoes-container { background: #fff; padding: 60px 20px; }
        .layout-flex-aval { display: flex; gap: 30px; max-width: 1100px; margin: 0 auto; align-items: flex-start; }
        .grid-avaliacoes { flex: 2; display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 15px; }
        .card-aval { background: #fffaf0; border-radius: 15px; padding: 15px; border: 1px solid #eee; text-align: left; }
        .estrelas { color: var(--amarelo); font-size: 0.8rem; margin-bottom: 5px; }
        .texto-aval { font-style: italic; color: #444; font-size: 0.8rem; line-height: 1.4; margin-bottom: 8px; }
        .autor-aval { font-weight: 700; color: var(--roxo-escuro); font-size: 0.75rem; }
        .form-aval { flex: 1; background: var(--cinza-fundo); padding: 25px; border-radius: 20px; position: sticky; top: 100px; }
        .form-aval h4 { margin: 0 0 15px; color: var(--roxo-escuro); font-size: 1rem; }
        .form-aval input, .form-aval textarea, .form-aval select { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 10px; border: 1px solid #ddd; font-family: 'Poppins'; box-sizing: border-box; font-size: 0.85rem; }

        @media (max-width: 850px) { .layout-flex-aval { flex-direction: column; } .form-aval { position: static; width: 100%; order: -1; margin-bottom: 30px; } }

        footer { background-color: var(--roxo-escuro); color: white; padding: 50px 5% 20px; font-size: 0.9rem; border-top: 3px solid var(--amarelo); }
        .footer-container { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; text-align: left; }
        .footer-col h3 { font-size: 1.1rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .footer-logo-a { background: var(--amarelo); color: var(--roxo-escuro); width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; overflow: hidden; }
        .footer-logo-a img { width: 100%; height: 100%; object-fit: cover; }
        .footer-col p { opacity: 0.8; line-height: 1.6; font-size: 0.85rem; }
        .footer-col ul { list-style: none; padding: 0; }
        .footer-col ul li { margin-bottom: 12px; display: flex; align-items: flex-start; gap: 10px; }
        .footer-col ul li a { color: white; text-decoration: none; opacity: 0.8; transition: 0.3s; }
        .footer-col ul li a:hover { opacity: 1; color: var(--amarelo); }
        .payment-icons { display: flex; flex-direction: column; gap: 10px; }
        .payment-item { display: flex; align-items: center; gap: 10px; opacity: 0.8; font-size: 0.85rem; }
        .footer-bottom { margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 0.8rem; opacity: 0.7; }

        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 95%; max-width: 450px; margin: 5vh auto; border-radius: 25px; overflow: hidden; }
        .modal-header { background: var(--roxo-escuro); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 20px; max-height: 75vh; overflow-y: auto; }
        .passo-indicador { background: #f3e5f5; padding: 10px; border-radius: 10px; margin-bottom: 15px; text-align: center; color: var(--roxo-principal); font-weight: 700; }
        .op-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; }
        .op-item { border: 1px solid #ddd; padding: 10px; border-radius: 12px; text-align: center; cursor: pointer; font-size: 0.8rem; }
        
        .input-entrega { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin: 5px 0 12px; box-sizing: border-box; font-family: 'Poppins'; }
        #barra-carrinho { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; background: var(--roxo-escuro); padding: 15px 30px; border-radius: 50px; display: none; justify-content: space-between; align-items: center; color: white; z-index: 1000; border: 2px solid var(--amarelo); cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <div class="logo-box">
            <img src="acai.jpeg" alt="A√ßa√≠ Mania" class="logo-circle">
            <span class="loja-nome">Delivery A√ßa√≠ Mania</span>
            <div id="status-box" class="status-loja"><div class="status-bola"></div><span id="status-texto">Verificando...</span></div>
        </div>
        <nav class="header-nav">
            <a href="#cardapio" class="header-link">Card√°pio</a>
            <a href="#combos" class="header-link">Combos</a>
            <a href="#footer" class="header-link">Contato</a>
        </nav>
        <div class="cart-header" onclick="abrirCarrinho()">
            <i class="fas fa-shopping-basket"></i>
            <span id="count-top" style="position: absolute; background: var(--amarelo); color: #000; font-size: 0.65rem; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; top: -5px; right: -10px;">0</span>
        </div>
    </header>

    <section class="hero-banner">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h2>A√ßa√≠ Mania - Muito mais que a√ßa√≠, uma verdadeira mania.</h2>
            <p>Monte seu a√ßa√≠ do seu jeito e receba em casa!</p>
            <a href="#cardapio" class="btn-hero">Pe√ßa Agora</a>
        </div>
    </section>

    <div class="container">
        <h1 class="secao-titulo" id="cardapio">Card√°pio - Monte seu A√ßa√≠</h1>
        <p class="secao-subtitulo">Escolha sua base favorita</p>
        <div class="grid-layout">
            <div class="card" onclick="abrirModal('A√ßa√≠ Tradicional', { '300ml': 12.00, '400ml': 16.00, '500ml': 20.00 })">
                <div class="img-box"><span class="badge-perso">Mais Vendido</span><img src="acai-300.jpeg"></div>
                <div class="card-body"><h3>A√ßa√≠ Tradicional</h3><button class="btn-monte">Escolher</button></div>
            </div>
            <div class="card" onclick="abrirModal('A√ßa√≠ com Nutella', { '300ml': 15.00, '400ml': 19.00, '500ml': 23.00 })">
                <div class="img-box"><span class="badge-perso">Premium</span><img src="acai-nutella.jpeg"></div>
                <div class="card-body"><h3>A√ßa√≠ com Nutella</h3><button class="btn-monte">Escolher</button></div>
            </div>
            <div class="card" onclick="abrirModal('Cupua√ßu', { '300ml': 17.00, '400ml': 20.00, '500ml': 23.00 })">
                <div class="img-box"><img src="cupuacu.jpeg"></div>
                <div class="card-body"><h3>Cupua√ßu</h3><button class="btn-monte">Escolher</button></div>
            </div>
            <div class="card" onclick="abrirModal('Casadinho', { '300ml': 17.00, '400ml': 21.00, '500ml': 25.00 })">
                <div class="img-box"><img src="casadinho.jpg"></div>
                <div class="card-body"><h3>Casadinho</h3><button class="btn-monte">Escolher</button></div>
            </div>
        </div>

        <h1 class="secao-titulo" id="combos">Combos Especiais</h1>
        <p class="secao-subtitulo">Os favoritos com desconto</p>
        <div class="grid-layout">
            <div class="card-combo destaque combo-casal" onclick="abrirModalCombo('Combo Casal', 36.00, 2)">
                <div class="combo-info"><div class="combo-icon"><i class="fas fa-heart"></i></div><div><h4>Combo Casal</h4><p>2 A√ßa√≠ 400ml com Nutella</p></div></div>
                <div style="display:flex; justify-content:space-between; align-items:center; position: relative; z-index: 2;"><span class="preco-combo">R$ 36,00</span><button class="btn-monte" style="width:auto; padding: 8px 20px;">Pedir</button></div>
            </div>
            <div class="card-combo destaque combo-mania" onclick="abrirModalCombo('Combo Mania', 28.00, 1)">
                <div class="combo-info"><div class="combo-icon"><i class="fas fa-star"></i></div><div><h4>Combo Mania</h4><p>1 A√ßa√≠ 500ml com Nutella</p></div></div>
                <div style="display:flex; justify-content:space-between; align-items:center; position: relative; z-index: 2;"><span class="preco-combo">R$ 28,00</span><button class="btn-monte" style="width:auto; padding: 8px 20px;">Pedir</button></div>
            </div>
            <div class="card-combo destaque combo-familia Mix" onclick="abrirModalCombo('Combo Fam√≠lia Mix', 52.00, 3)">
                <div class="combo-info"><div class="combo-icon"><i class="fas fa-users"></i></div><div><h4>Combo Fam√≠lia Mix</h4><p>3 A√ßa√≠ 400ml - 2 com Nutella e 1 sem Nutella</p></div></div>
                <div style="display:flex; justify-content:space-between; align-items:center; position: relative; z-index: 2;"><span class="preco-combo">R$ 52,00</span><button class="btn-monte" style="width:auto; padding: 8px 20px;">Pedir</button></div>
            </div>
             <div class="card-combo destaque combo-familia" onclick="abrirModalCombo('Combo Fam√≠lia', 52.00, 3)">
                <div class="combo-info"><div class="combo-icon"><i class="fas fa-users"></i></div><div><h4>Combo Fam√≠lia</h4><p>3 A√ßa√≠ 400ml com Nutella</p></div></div>
                <div style="display:flex; justify-content:space-between; align-items:center; position: relative; z-index: 2;"><span class="preco-combo">R$ 52,00</span><button class="btn-monte" style="width:auto; padding: 8px 20px;">Pedir</button></div>
            </div>
            <div class="card-combo destaque combo-economico" onclick="abrirModalCombo('Trio Econ√¥mico', 42.00, 3)">
                <div class="combo-info"><div class="combo-icon"><i class="fas fa-tag"></i></div><div><h4>Trio Econ√¥mico</h4><p>3 A√ßa√≠ 300ml sem Nutella</p></div></div>
                <div style="display:flex; justify-content:space-between; align-items:center; position: relative; z-index: 2;"><span class="preco-combo">R$ 42,00</span><button class="btn-monte" style="width:auto; padding: 8px 20px;">Pedir</button></div>
            </div>
        </div>
    </div>

    <section class="avaliacoes-container">
        <h1 class="secao-titulo">Avalia√ß√µes</h1>
        <div class="layout-flex-aval">
            <div class="grid-avaliacoes" id="lista-avaliacoes">
                <div class="card-aval">
                    <div class="estrelas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="texto-aval">"O melhor a√ßa√≠! O combo casal vale muito a pena."</p>
                    <p class="autor-aval">Maria Silva</p>
                </div>
                <div class="card-aval">
                    <div class="estrelas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="texto-aval">"Entrega super r√°pida e o a√ßa√≠ chegou bem geladinho. Nota 10!"</p>
                    <p class="autor-aval">Ricardo Oliveira</p>
                </div>
                <div class="card-aval">
                    <div class="estrelas">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="texto-aval">"Amo o Cupua√ßu daqui, √© muito cremoso e as frutas s√£o frescas."</p>
                    <p class="autor-aval">Ana Beatriz</p>
                </div>
            </div>
            <div class="form-aval">
                <h4>Sua avalia√ß√£o</h4>
                <input type="text" id="aval-nome" placeholder="Seu nome">
                <textarea id="aval-msg" rows="3" placeholder="Sua experi√™ncia..."></textarea>
                <button class="btn-monte" style="width:100%; font-size: 0.8rem;" onclick="adicionarComentario()">Publicar</button>
            </div>
        </div>
    </section>

    <footer id="footer">
        <div class="footer-container">
            <div class="footer-col">
                <h3><div class="footer-logo-a"><img src="acai.jpeg" alt="Logo"></div> A√ßa√≠ Mania</h3>
                <p>Qualidade e sabor direto para voc√™. O melhor a√ßa√≠ do Itapo√£ Parque.</p>
                <p style="margin-top: 15px;"><i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i> Itapo√£ Parque, Bras√≠lia - DF</p>
            </div>
            <div class="footer-col">
                <h3>Contato e Hor√°rio</h3>
                <ul>
                    <li><i class="fab fa-whatsapp"></i> <a href="https://wa.me/5561995214424">(61) 99521-4424</a></li>
                    <li><i class="fab fa-instagram"></i> <a href="https://instagram.com/acai_mania">@acai_mania</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Pagamento</h3>
                <div class="payment-icons">
                    <div class="payment-item">üí≥ Cart√£o Cr√©dito/D√©bito</div>
                    <div class="payment-item">üì± PIX</div>
                    <div class="payment-item">üíµ Dinheiro</div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">A√ßa√≠ Mania ¬© 2026 - Bras√≠lia/DF</div>
    </footer>

    <div id="modalProd" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h3 id="m-tit" style="margin:0"></h3><span onclick="fecharModal()" style="cursor:pointer; font-size: 2rem;">&times;</span></div>
            <div class="modal-body">
                <div id="indicador-copo" class="passo-indicador" style="display:none;"></div>
                
                <div id="box-tamanhos">
                    <p><b>Escolha o Tamanho:</b></p>
                    <div class="op-grid" id="grid-tamanhos"></div>
                </div>
                
                <p><b>Escolha a Fruta:</b></p>
                <div class="op-grid" id="grid-frutas">
                    <div class="op-item selecionado" onclick="selectFruta(this)">Sem Fruta</div>
                    <div class="op-item" onclick="selectFruta(this)">Banana</div>
                    <div class="op-item" onclick="selectFruta(this)">Morango</div>
                </div>

                <p><b>Complementos (Escolha at√© 3):</b></p>
                <div class="op-grid" id="grid-complementos">
                    <div class="op-item multi-select" onclick="selectComplemento(this)">Leite em P√≥</div>
                    <div class="op-item multi-select" onclick="selectComplemento(this)">Granola</div>
                    <div class="op-item multi-select" onclick="selectComplemento(this)">Pa√ßoca</div>
                    <div class="op-item multi-select" onclick="selectComplemento(this)">leite Condensado</div>
                    <div class="op-item multi-select" onclick="selectComplemento(this)">Amendoim</div>
                </div>

                <button class="btn-monte" style="width:100%; margin-top:20px;" onclick="proximoPasso()">Confirmar</button>
            </div>
        </div>
    </div>

    <div id="modalCart" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h3>Carrinho</h3><span onclick="fecharCart()" style="cursor:pointer; font-size: 2rem;">&times;</span></div>
            <div class="modal-body">
                
                <div id="topo-cart" style="display: flex; justify-content: flex-end;">
                    <button class="btn-limpar" onclick="limparCarrinho()"><i class="fas fa-trash-alt"></i> Limpar Tudo</button>
                </div>

                <div id="lista-carrinho" style="margin-bottom: 20px;"></div>
                
                <input type="text" id="cli-nome" class="input-entrega" placeholder="Seu Nome">
                <input type="tel" id="cli-tel" class="input-entrega" placeholder="Telefone (WhatsApp)">
                 <label style="font-weight:600; margin-bottom:5px; display:block;">
    üìç Onde vamos entregar?
</label>

<p style="font-size:13px; color:#666; margin-top:-5px; margin-bottom:8px;">
    Selecione sua regi√£o para calcular o frete
</p>
                <select id="cli-cidade" class="input-entrega" onchange="atualizarFrete()" 
                style="
                    border: 2px solid var(--roxo-principal);
                    border-radius: 10px;
                    font-weight: 500;
                ">
                    <option value="Retirar na Loja" data-frete="0.00">Retirar na Loja</option>
                    <option value="Itapo√£ - Parque" data-frete="3.00">Itapo√£ - Parque</option>
                    <option value="Itapo√£ - Del Lago" data-frete="5.00">Itapo√£ - Del Lago </option>
                    <option value="Itapo√£ - Fazendinha" data-frete="5.00">Itapo√£ - Fazendinha </option>
                    <option value="Itapo√£ I" data-frete="5.00">Itapo√£ I</option>
                    <option value="Itapo√£ - II" data-frete="5.00">Itapo√£ II </option>
                    <option value="Parano√°" data-frete="7.00">Parano√°</option>
                    <option value="Parano√° Parque" data-frete="7.00">Parano√° Parque</option>
                    <option value="Cond. Entre Lagos" data-frete="8.00">Cond. Entre Lagos</option>
                    <option value="Cond. Novo Horizonte" data-frete="8.00">Cond. Novo Horizonte</option>
                    <option value="Cond. La Font" data-frete="8.00">Cond. La Font</option>
                </select>
                <div id="display-frete" style="
    background: #f3e8ff;
    padding: 10px;
    border-radius: 8px;
    font-weight: 600;
    color: var(--roxo-principal);
    margin-top: 8px;
    margin-bottom: 15px;
">
    üöö Frete: R$ 0,00
</div>
                <input type="text" id="cli-end" class="input-entrega" placeholder="Endere√ßo de Entrega">

                <div id="resumo-pedido" style="
    background:#f3e5f5;
    padding:15px;
    border-radius:15px;
    margin:15px 0;
    font-size:0.9rem;
">
    <div style="display:flex; justify-content:space-between;">
        <span>Subtotal:</span>
        <span id="resumo-subtotal">R$ 0,00</span>
    </div>

    <div style="display:flex; justify-content:space-between;">
        <span>Frete:</span>
        <span id="resumo-frete">R$ 0,00</span>
    </div>

    <hr style="margin:10px 0; border:none; border-top:1px solid #ddd;">

    <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1rem; color:var(--roxo-escuro);">
        <span>Total:</span>
        <span id="resumo-total">R$ 0,00</span>
    </div>
</div>
                
                <p><b>Forma de Pagamento:</b></p>
                <select id="pag-forma" class="input-entrega">
                    <option value="PIX">PIX</option>
                    <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                    <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                    <option value="Dinheiro">Dinheiro</option>
                </select>

                <button class="btn-monte" style="background: #25d366; width:100%" onclick="enviarZap()">Enviar Pedido</button>
            </div>
        </div>
    </div>

    <div id="barra-carrinho" onclick="abrirCarrinho()">
        <span>üõí <span id="itens-txt">0 itens</span></span>
        <span id="total-txt">R$ 0,00</span>
    </div>

    <script>
let carrinho = [];
let lojaAberta = false;
let itemAtual = {};
let complementosSelecionados = [];
let totalCoposCombo = 1, copoAtualCombo = 1;
let valorFrete = 0;

// ===============================
// STATUS LOJA
// ===============================
function atualizarStatusLoja() {
    const agora = new Date();
    const hora = agora.getHours();

    const statusBox = document.getElementById('status-box');
    const statusTexto = document.getElementById('status-texto');

    if (hora >= 10 && hora < 22) {
        lojaAberta = true;

        statusBox.className = 'status-loja loja-aberta';
        statusTexto.innerText = 'Aberto ‚Ä¢ at√© 22:00';
    } else {
        lojaAberta = false;

        statusBox.className = 'status-loja loja-fechada';
        statusTexto.innerText = 'Fechado ‚Ä¢ abre √†s 10:00';
    }
}
atualizarStatusLoja();
setInterval(atualizarStatusLoja, 60000);


// ===============================
// FRETE
// ===============================
function atualizarFrete() {
    const select = document.getElementById("cli-cidade");
    const option = select.options[select.selectedIndex];
    valorFrete = parseFloat(option.getAttribute("data-frete")) || 0;

    document.getElementById("display-frete").innerText =
        "Frete: R$ " + valorFrete.toFixed(2);

    atualizarBarra();
}


// ===============================
// MODAL PRODUTO
// ===============================
function abrirModal(nome, precos) {

    if (!lojaAberta) {
    alert("Estamos fechados! Voc√™ pode fazer pedidos das 10:00 √†s 22:00.");
    return;
}
    totalCoposCombo = 1; 
    copoAtualCombo = 1;
    complementosSelecionados = [];

    itemAtual = { 
        nome, 
        preco: precos['300ml'], 
        tamanho: '300ml', 
        fruta: 'Sem Fruta', 
        complementos: "" 
    };
    
    document.getElementById('m-tit').innerText = nome;
    document.getElementById('indicador-copo').style.display = 'none';
    document.getElementById('box-tamanhos').style.display = 'block';
    
    const grid = document.getElementById('grid-tamanhos'); 
    grid.innerHTML = '';

    Object.keys(precos).forEach(tam => {
        grid.innerHTML += `
            <div class="op-item ${tam=='300ml'?'selecionado':''}" 
                onclick="selectTam(this, '${tam}', ${precos[tam]})">
                ${tam}<br>R$ ${precos[tam].toFixed(2)}
            </div>`;
    });

    resetSelecoes();
    document.getElementById('modalProd').style.display = 'block';
}


function abrirModalCombo(nome, preco, qtd) {
    totalCoposCombo = qtd; 
    copoAtualCombo = 1;
    complementosSelecionados = [];

    itemAtual = { 
        nome, 
        preco, 
        tamanho: 'Combo', 
        fruta: 'Sem Fruta', 
        escolhasCombo: [] 
    };
    
    document.getElementById('m-tit').innerText = nome;
    document.getElementById('box-tamanhos').style.display = 'none';
    document.getElementById('indicador-copo').style.display = 'block';
    document.getElementById('indicador-copo').innerText = `Copo ${copoAtualCombo} de ${totalCoposCombo}`;

    resetSelecoes();
    document.getElementById('modalProd').style.display = 'block';
}


function resetSelecoes() {
    document.querySelectorAll('.multi-select').forEach(i => i.classList.remove('selecionado'));
    document.querySelectorAll('#grid-frutas .op-item').forEach(i => i.classList.remove('selecionado'));
    document.querySelectorAll('#grid-frutas .op-item')[0].classList.add('selecionado');
    itemAtual.fruta = "Sem Fruta";
}


function selectTam(el, tam, preco) {
    document.querySelectorAll('#grid-tamanhos .op-item')
        .forEach(i => i.classList.remove('selecionado'));
    el.classList.add('selecionado');
    itemAtual.tamanho = tam;
    itemAtual.preco = preco;
}


function selectFruta(el) {
    document.querySelectorAll('#grid-frutas .op-item')
        .forEach(i => i.classList.remove('selecionado'));
    el.classList.add('selecionado');
    itemAtual.fruta = el.innerText;
}


function selectComplemento(el) {
    const nomeComp = el.innerText;

    if (el.classList.contains('selecionado')) {
        el.classList.remove('selecionado');
        complementosSelecionados =
            complementosSelecionados.filter(item => item !== nomeComp);
    } else {
        if (complementosSelecionados.length < 3) {
            el.classList.add('selecionado');
            complementosSelecionados.push(nomeComp);
        } else {
            alert("Escolha no m√°ximo 3 complementos!");
        }
    }
}


// ===============================
// CONFIRMAR ITEM
// ===============================
function proximoPasso() {

    if (totalCoposCombo > 1) {
        const escolhaAtual =
            `Copo ${copoAtualCombo}: ${itemAtual.fruta} + [${complementosSelecionados.join(", ") || "Sem complementos"}]`;

        itemAtual.escolhasCombo.push(escolhaAtual);

        if (copoAtualCombo < totalCoposCombo) {
            copoAtualCombo++;
            document.getElementById('indicador-copo').innerText =
                `Copo ${copoAtualCombo} de ${totalCoposCombo}`;
            complementosSelecionados = [];
            resetSelecoes();
            return;
        }
    } else {
        itemAtual.complementos =
            complementosSelecionados.join(", ") || "Nenhum";
    }

    carrinho.push({...itemAtual});
fecharModal();
atualizarBarra();

setTimeout(() => {
    mostrarConfirmacao();
}, 200);

}


// ===============================
// CARRINHO
// ===============================
function atualizarBarra() {
    const subtotal = carrinho.reduce((a, b) => a + b.preco, 0);
    const totalComFrete = subtotal + valorFrete;

    document.getElementById('itens-txt').innerText =
        carrinho.length + " itens";

    document.getElementById('total-txt').innerText =
        "R$ " + totalComFrete.toFixed(2);

    document.getElementById('count-top').innerText =
        carrinho.length;

    document.getElementById('barra-carrinho').style.display =
        carrinho.length > 0 ? 'flex' : 'none';

    // üî• ATUALIZA RESUMO
    document.getElementById('resumo-subtotal').innerText =
        "R$ " + subtotal.toFixed(2);

    document.getElementById('resumo-frete').innerText =
        "R$ " + valorFrete.toFixed(2);

    document.getElementById('resumo-total').innerText =
        "R$ " + totalComFrete.toFixed(2);
}


function abrirCarrinho() {
    const lista = document.getElementById('lista-carrinho');
    lista.innerHTML = "";

    if (carrinho.length === 0) {
        lista.innerHTML =
            "<p style='text-align:center; opacity:0.6;'>Seu carrinho est√° vazio.</p>";
    } else {
        carrinho.forEach(item => {
            lista.innerHTML += `
                <div style="border-bottom:1px solid #eee; padding:10px 0;">
                    <b>${item.nome} (${item.tamanho})</b><br>
                    <small>
                        ${item.escolhasCombo ?
                        item.escolhasCombo.join("<br>") :
                        item.fruta + " - " + item.complementos}
                    </small><br>
                    <span style="color:var(--roxo-principal)">
                        R$ ${item.preco.toFixed(2)}
                    </span>
                </div>`;
        });
    }

    document.getElementById('modalCart').style.display = 'block';
}


function fecharModal() {
    document.getElementById('modalProd').style.display = 'none';
}

function fecharCart() {
    document.getElementById('modalCart').style.display = 'none';
}

function mostrarConfirmacao() {
    const barra = document.getElementById('barra-carrinho');
    barra.style.transform = "translateX(-50%) scale(1.05)";
    setTimeout(() => {
        barra.style.transform = "translateX(-50%) scale(1)";
    }, 200);
}

function continuarComprando() {
    document.getElementById("modalConfirmacao").style.display = "none";
}

function finalizarPedido() {
    document.getElementById("modalConfirmacao").style.display = "none";

    

    // Pequeno delay para evitar conflito de anima√ß√£o
    setTimeout(() => {
    abrirCarrinho(); 
    }, 150);
}


function limparCarrinho() {
    carrinho = [];
    atualizarBarra();
    abrirCarrinho();
}

function enviarZap() {
    if (carrinho.length === 0) {
        alert("Seu carrinho est√° vazio!");
        return;
    }

    if (!lojaAberta) {
    alert("Estamos fechados no momento! üò¢\n\nFuncionamos das 10:00 √†s 22:00.");
    return;
}

    const nome = document.getElementById("cli-nome").value;
    const telefone = document.getElementById("cli-tel").value;
    const cidade = document.getElementById("cli-cidade").value;
    const endereco = document.getElementById("cli-end").value;
    const pagamento = document.getElementById("pag-forma").value;

    if (!nome || !telefone || !endereco) {
        alert("Preencha seus dados!");
        return;
    }

    const subtotal = carrinho.reduce((a, b) => a + b.preco, 0);
    const total = subtotal + valorFrete;

    const itensDetalhados = carrinho.map(item => {
        let texto = `üü£ ${item.nome} (${item.tamanho}) - R$ ${item.preco.toFixed(2)}\n`;
        if (item.escolhasCombo) {
            texto += item.escolhasCombo.join("\n");
        } else {
            texto += `Fruta: ${item.fruta}\nComplementos: ${item.complementos}`;
        }
        return texto;
    }).join("\n\n");

    const mensagem = 
`*NOVO PEDIDO - A√áA√ç MANIA*

üë§ Nome: ${nome}
üìû Telefone: ${telefone}
üìç Cidade: ${cidade}
üè† Endere√ßo: ${endereco}

${itensDetalhados}

Subtotal: R$ ${subtotal.toFixed(2)}
Frete: R$ ${valorFrete.toFixed(2)}
*Total: R$ ${total.toFixed(2)}*

üí≥ Pagamento: ${pagamento}`;

    const numero = "5561995214424";
    const link = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;

    // Abre WhatsApp
    window.open(link, "_blank", "noopener,noreferrer");

    // Reset completo do carrinho e formul√°rio
    carrinho = [];
    valorFrete = 0;
    fecharCart(); // fecha modal do carrinho
    atualizarBarra(); // atualiza barra do carrinho
    document.getElementById("cli-nome").value = "";
    document.getElementById("cli-tel").value = "";
    document.getElementById("cli-cidade").selectedIndex = 0;
    document.getElementById("cli-end").value = "";
    document.getElementById("pag-forma").selectedIndex = 0;
    document.getElementById("resumo-subtotal").innerText = "R$ 0,00";
    document.getElementById("resumo-frete").innerText = "R$ 0,00";
    document.getElementById("resumo-total").innerText = "R$ 0,00";
    document.getElementById("display-frete").innerText = "Frete: R$ 0,00";

    // Volta para o topo da p√°gina
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Envia para planilha
    enviarParaSheets(nome, telefone, cidade, endereco, itensDetalhados, subtotal, valorFrete, total, pagamento);
}

function enviarParaSheets(nome, telefone, cidade, endereco, itens, subtotal, frete, total, pagamento) {

    fetch("https://script.google.com/macros/s/AKfycbykZivTN9zgeVRC2dcRLJe1S-RrNzD8OkLGAijeY9-ndXkG4y3yt0BWEpIadAztNPZidA/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            numeroPedido: Date.now(),
            data: new Date().toLocaleString(),
            nome: nome,
            telefone: telefone,
            cidade: cidade,
            endereco: endereco,
            itens: itens,
            subtotal: subtotal,
            frete: frete,
            total: total,
            pagamento: pagamento
        })
    })
    .then(() => {
        console.log("Pedido enviado para planilha com sucesso!");
    })
    .catch(error => {
        console.error("Erro ao enviar para planilha:", error);

     // 1Ô∏è‚É£ Reset completo do site antes de abrir o WhatsApp
    fecharCart();           // fecha o modal do carrinho
    carrinho = [];          // esvazia o carrinho
    atualizarBarra();       // atualiza barra do carrinho
    document.getElementById("cli-nome").value = "";
    document.getElementById("cli-tel").value = "";
    document.getElementById("cli-cidade").selectedIndex = 0;
    document.getElementById("cli-end").value = "";
    document.getElementById("pag-forma").selectedIndex = 0;
    document.getElementById("resumo-subtotal").innerText = "R$ 0,00";
    document.getElementById("resumo-frete").innerText = "R$ 0,00";
    document.getElementById("resumo-total").innerText = "R$ 0,00";
    window.scrollTo({ top: 0, behavior: 'smooth' }); // volta para o topo
    })
    .catch(err => {
        console.error("Erro ao enviar pedido:", err);
        alert("Ocorreu um erro ao enviar o pedido. Tente novamente.");
    });
}
    window.open(
        `https://wa.me/5561995214424?text=${encodeURIComponent(mensagemFinal)}`,
        "_blank"
    );


</script>
<!-- MODAL CONFIRMA√á√ÉO -->
<div id="modalConfirmacao" style="
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
">

    <div style="
        background: #fff;
        padding: 25px;
        border-radius: 15px;
        width: 90%;
        max-width: 360px;
        text-align: center;
        animation: aparecer 0.2s ease;
    ">

        <h3 style="margin-bottom: 10px;">Produto adicionado üéâ</h3>
        <p style="margin-bottom: 20px; font-size:14px;">
            Deseja finalizar o pedido ou continuar comprando?
        </p>

        <div style="display:flex; justify-content:space-between; gap:10px;">

            <button onclick="continuarComprando()" style="
                flex:1;
                background: #eee;
                border: none;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 500;
            ">
                üõí Continuar
            </button>

            <button onclick="finalizarPedido()" style="
                flex:1;
                background: var(--roxo-principal);
                color: white;
                border: none;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                font-weight: 600;
            ">
                ‚úÖ Finalizar
            </button>

        </div>
    </div>
</div>

<style>
@keyframes aparecer {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
</style>

<div id="modalConfirmacao" class="modal" style="display:none; align-items:center; justify-content:center;">
    <div style="background:white; padding:25px; border-radius:20px; text-align:center; max-width:300px;">
        <h3>Item adicionado! üéâ</h3>
        <p>Deseja continuar comprando ou finalizar?</p>
        <button onclick="continuarComprando()" class="btn-monte" style="margin-bottom:10px;">Continuar</button>
        <button onclick="finalizarPedido()" class="btn-monte" style="background:#25d366;">Ir para carrinho</button>
    </div>
</div>


</body>
</html>
