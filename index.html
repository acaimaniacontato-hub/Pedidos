<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A√ßa√≠ Mania - Premium Delivery</title>
    <style>
        :root { 
            --bg-dark: #1a0521; 
            --card-bg: #2d0b37;
            --roxo-vibrante: #9d34da;
            --texto: #f4e9f7;
            --verde-whats: #25d366; 
            --dourado: #ffcf4b; 
            --fundo-input: #ffffff;
        }
        
        body { font-family: 'Segoe UI', Roboto, sans-serif; background-color: var(--bg-dark); color: var(--texto); margin: 0; padding-bottom: 80px; }
        header { background: linear-gradient(180deg, #3e0e4d 0%, var(--bg-dark) 100%); padding: 30px 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .logo-img { width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--roxo-vibrante); margin-bottom: 10px; object-fit: cover; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .card-secao { background: var(--card-bg); padding: 20px; border-radius: 18px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        h2 { color: var(--dourado); font-size: 1.2rem; margin-top: 0; }
        
        input, select, textarea { width: 100%; padding: 15px; margin-top: 8px; border: 2px solid var(--roxo-vibrante); border-radius: 12px; font-size: 16px; box-sizing: border-box; background: var(--fundo-input); color: #000; font-weight: 600; }
        
        .desc-produto { background: #fff3cd; border-left: 5px solid #ffc107; padding: 12px; margin: 15px 0; font-size: 0.9rem; color: #856404; font-weight: bold; border-radius: 8px; display: none; }
        .grid-complementos { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; border: 1px dashed var(--roxo-vibrante); }
        .secao-frutas { grid-column: 1 / -1; color: var(--dourado); font-size: 0.8rem; text-transform: uppercase; margin-bottom: 5px; }
        .item-check { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: white; cursor: pointer; }
        .item-check input { width: 20px; height: 20px; }
        
        .btn-principal { background: var(--roxo-vibrante); color: white; border: none; padding: 18px; border-radius: 12px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 15px; }
        .btn-concluir { background: var(--verde-whats); color: white; border: none; padding: 20px; border-radius: 12px; width: 100%; font-size: 20px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        
        .resumo { background: white; border: 4px solid var(--roxo-vibrante); padding: 20px; border-radius: 15px; margin-top: 25px; color: black; display: none; }
        .item-carrinho { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; padding: 12px 0; }
        .btn-remover { background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body onload="verificarHorario()">

<div id="toast" style="visibility: hidden; min-width: 250px; background-color: var(--verde-whats); color: #fff; text-align: center; border-radius: 10px; padding: 16px; position: fixed; z-index: 1001; left: 50%; bottom: 30px; transform: translateX(-50%);">‚úÖ Item adicionado!</div>

<header>
    <img src="acai.jpeg" alt="Logo" class="logo-img">
    <h1>A√ßa√≠ Mania üíú</h1>
</header>

<div class="container">
    <div id="statusLoja" style="text-align:center; padding:10px; border-radius:10px; margin-bottom:15px; font-weight:bold; color: white;">Verificando...</div>

    <div class="card-secao">
        <h2>üìç Entrega</h2>
        <input type="text" id="nome" placeholder="Seu Nome">
        <input type="tel" id="whatsapp_cliente" placeholder="Seu WhatsApp (61) 9....">
        
        <select id="cidade" onchange="atualizarResumo()">
            <option value="Itapo√° Parque">Itapo√° Parque (Gr√°tis)</option>
            <option value="Itapo√° I">Itapo√° I</option>
            <option value="Itapo√° II">Itapo√° II</option>
            <option value="Itapo√° - Del Lago">Itapo√° - Del Lago (R$ 7,00)</option>
            <option value="Parano√°">Parano√° (R$ 7,00)</option>
            <option value="Parano√° Parque">Parano√° Parque (R$ 7,00)</option>
            <option value="Cond. Entre Lagos">Cond. Entre Lagos (R$ 8,00)</option>
            <option value="Cond. Novo Horizonte">Cond. Novo Horizonte (R$ 8,00)</option>
            <option value="Cond. La Font">Cond. La Font (R$ 8,00)</option>
        </select>
        <input type="text" id="endereco" placeholder="Endere√ßo Completo">
    </div>

    <div class="card-secao">
        <h2>ü•§ Produto</h2>
        <select id="produto" onchange="atualizarOpcoes()">
            <option value="">Escolha aqui...</option>
            <option value="A√ßa√≠ Tradicional" data-desc="üíú A√ßa√≠ cremoso batido na hora!">A√ßa√≠ Tradicional (Sem Nutella)</option>
            <option value="A√ßa√≠ com Nutella" data-desc="üç´ A√ßa√≠ premium com Nutella aut√™ntica.">A√ßa√≠ com Nutella</option>
            <option value="Cupua√ßu" data-desc="‚ö™ Polpa de cupua√ßu pura e cremosa.">Cupua√ßu Puro</option>
            <option value="Combo Casal" data-fixo="36.00" data-desc="üëâ 2 A√ßa√≠s de 400 ml com Nutella.">Combo Casal ‚Äî R$ 36,00</option>
            <option value="Combo Fam√≠lia" data-fixo="54.00" data-desc="üëâ 3 A√ßa√≠s de 400 ml com Nutella.">Combo Fam√≠lia ‚Äî R$ 54,00</option>
        </select>

        <div id="descProduto" class="desc-produto"></div>

        <div id="boxEscolhas" style="display:none;">
            <div id="boxTamanho">
                <label style="color:var(--dourado); font-weight:bold; display:block; margin-top:10px;">Tamanho:</label>
                <select id="tamanho" onchange="atualizarResumo()"></select>
            </div>
            
            <label style="color:var(--dourado); font-weight:bold; display:block; margin-top:15px;">Complementos Gr√°tis:</label>
            <div class="grid-complementos" id="listaComplementos">
                <div class="secao-frutas">üçé Fruta (Escolha uma):</div>
                <label class="item-check"><input type="checkbox" class="fruta-check" value="Banana" onclick="limitarFruta(this)"> üçå Banana</label>
                <label class="item-check"><input type="checkbox" class="fruta-check" value="Morango" onclick="limitarFruta(this)"> üçì Morango</label>
                <div class="secao-frutas" style="margin-top:10px;">‚ú® Outros:</div>
                <label class="item-check"><input type="checkbox" value="Leite em P√≥"> Leite em P√≥</label>
                <label class="item-check"><input type="checkbox" value="Granola"> Granola</label>
                <label class="item-check"><input type="checkbox" value="Pa√ßoca"> Pa√ßoca</label>
                <label class="item-check"><input type="checkbox" value="Amendoin"> Amendoin</label>
                <label class="item-check"><input type="checkbox" value="Leite Condensado"> Leite Condensado</label>
            </div>
        </div>
        <button class="btn-principal" onclick="adicionarItem()">+ ADICIONAR AO PEDIDO</button>
    </div>

    <div class="card-secao">
        <h2>üí≥ Pagamento</h2>
        <select id="pagamento">
            <option value="Pix">Pix (Chave: 61995214424)</option>
            <option value="Cart√£o">Cart√£o na Entrega</option>
            <option value="Dinheiro">Dinheiro</option>
        </select>
    </div>

    <div id="resumo" class="resumo">
        <h3 style="margin-top:0;">üõí Seu Pedido</h3>
        <div id="listaItens"></div>
        <div id="total" style="font-size:1.5rem; font-weight:800; text-align:center; margin:20px 0;"></div>
        <button class="btn-concluir" onclick="finalizarPedido()">CONCLUIR PEDIDO</button>
    </div>
</div>

<script>
    let carrinho = [];
    let valorTotalFinal = 0;

    function limitarFruta(checkbox) {
        document.querySelectorAll('.fruta-check').forEach(c => { if(c !== checkbox) c.checked = false; });
    }

    function verificarHorario() {
        const hora = new Date().getHours();
        const s = document.getElementById("statusLoja");
        if(hora >= 7 && hora < 23) { s.innerHTML = "üü¢ ABERTO"; s.style.background = "#25d366"; }
        else { s.innerHTML = "üî¥ FECHADO"; s.style.background = "#ff4444"; }
    }

    function atualizarOpcoes() {
        const pSel = document.getElementById("produto");
        const pValue = pSel.value;
        const box = document.getElementById("boxEscolhas");
        const boxT = document.getElementById("boxTamanho");
        const tSel = document.getElementById("tamanho");
        const descDiv = document.getElementById("descProduto");
        
        if(!pValue) { box.style.display = "none"; descDiv.style.display = "none"; return; }
        
        descDiv.innerHTML = pSel.options[pSel.selectedIndex].getAttribute("data-desc");
        descDiv.style.display = "block";
        box.style.display = "block";
        
        if(pValue.includes("Combo")) {
            boxT.style.display = "none";
        } else {
            boxT.style.display = "block";
            if(pValue === "A√ßa√≠ Tradicional") {
                tSel.innerHTML = '<option value="12">300ml - R$ 12</option><option value="16">400ml - R$ 16</option><option value="20">500ml - R$ 20</option>';
            } else if(pValue === "A√ßa√≠ com Nutella") {
                tSel.innerHTML = '<option value="15">300ml - R$ 15</option><option value="19">400ml - R$ 19</option><option value="23">500ml - R$ 23</option>';
            } else {
                tSel.innerHTML = '<option value="15">300ml - R$ 15</option><option value="16">400ml - R$ 16</option><option value="20">500ml - R$ 20</option>';
            }
        }
    }

    function adicionarItem() {
        const pSel = document.getElementById("produto");
        if(!pSel.value) return alert("Escolha um produto!");
        
        const nomeP = pSel.options[pSel.selectedIndex].text.split('‚Äî')[0];
        let valor = pSel.value.includes("Combo") ? parseFloat(pSel.options[pSel.selectedIndex].getAttribute("data-fixo")) : parseFloat(document.getElementById("tamanho").value);
        
        let comps = [];
        document.querySelectorAll('#listaComplementos input:checked').forEach(c => comps.push(c.value));
        
        carrinho.push({
            nome: nomeP.trim(),
            tamanho: pSel.value.includes("Combo") ? "" : document.getElementById("tamanho").options[document.getElementById("tamanho").selectedIndex].text.split('-')[0].trim(),
            valor: valor,
            comp: comps.join(", ")
        });

        document.querySelectorAll('#listaComplementos input').forEach(c => c.checked = false);
        const t = document.getElementById("toast");
        t.style.visibility = "visible";
        setTimeout(() => t.style.visibility = "hidden", 2000);
        atualizarResumo();
    }

    function atualizarResumo() {
        const res = document.getElementById("resumo");
        if(carrinho.length === 0) { res.style.display = "none"; return; }
        res.style.display = "block";
        
        let html = "";
        let subtotal = 0;
        carrinho.forEach((i, idx) => {
            subtotal += i.valor;
            html += `<div class="item-carrinho">
                <span><b>${i.nome} ${i.tamanho}</b><br><small>Com: ${i.comp}</small></span>
                <button class="btn-remover" onclick="carrinho.splice(${idx},1); atualizarResumo();">Remover</button>
            </div>`;
        });
        
        const cid = document.getElementById("cidade").value;
        let frete = 0;
        if(cid === "Itapo√° - Del Lago" || cid === "Parano√°") frete = 7;
        else if(cid === "Cond. Entre Lagos") frete = 8;
        
        valorTotalFinal = subtotal + frete;
        document.getElementById("listaItens").innerHTML = html;
        document.getElementById("total").innerHTML = `TOTAL: R$ ${valorTotalFinal.toFixed(2)}`;
    }

    function finalizarPedido() {
        const nome = document.getElementById("nome").value;
        const zap_cliente = document.getElementById("whatsapp_cliente").value;
        const end = document.getElementById("endereco").value;
        if(!nome || !end || !zap_cliente) return alert("Preencha Nome, WhatsApp e Endere√ßo!");

        const pedidoId = "AM-" + Date.now().toString().slice(-6);
        let prodsPlan = "";
        let compsPlan = "";
        let msg = `*PEDIDO #${pedidoId}* üíú\n\n*Cliente:* ${nome}\n*WhatsApp:* ${zap_cliente}\n*Endere√ßo:* ${end}\n\n*ITENS:*`;
        
        carrinho.forEach(i => {
            msg += `\n- ${i.nome} ${i.tamanho} (Extras: ${i.comp})\n`;
            prodsPlan += `${i.nome} ${i.tamanho} | `;
            // --- AJUSTE SOLICITADO ABAIXO: ENVIANDO SOMENTE OS COMPLEMENTOS ---
            compsPlan += `${i.comp} | `; 
        });

        msg += `\n*TOTAL: R$ ${valorTotalFinal.toFixed(2)}*\n*Pagamento:* ${document.getElementById("pagamento").value}`;

        fetch('https://script.google.com/macros/s/AKfycbwlstTyQvN7JBZTDjpXcyCQvqUZdE2v9wtB8Ud-aT597G8LAFLYAPSFjle1BjQwIXWr/exec', {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({
                id: pedidoId,
                nome: nome,
                whatsapp: zap_cliente,
                endereco: end,
                produtos: prodsPlan, 
                complementos: compsPlan, 
                valor: valorTotalFinal.toFixed(2),
                pagamento: document.getElementById("pagamento").value
            })
        });

        window.location.href = `https://wa.me/5561995214424?text=${encodeURIComponent(msg)}`;
    }
</script>
</body>
</html>
